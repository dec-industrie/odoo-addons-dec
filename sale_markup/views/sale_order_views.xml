<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <record model="ir.ui.view" id="sale_order_form_view" >
        <field name="name">sale.order.form</field>
        <field name="model">sale.order</field>
        <field name="inherit_id" ref="sale.view_order_form"/>
        <field name="arch" type="xml">

            <field name="price_subtotal" position="replace"/>
            <label for="product_uom_qty" position="replace"/>
            <field name="product_uom_qty" position="replace"/>
            <field name="product_uom" position="replace"/>
            <field name="purchase_price" position="replace"/>
            <field name="price_unit" position="replace"/>
            <label for="discount" position="replace"/>
            <field name="discount" position="replace"/>

            <xpath expr="//field[@name='order_line']/form//field[@name='name']" position="after">
                <group col="6" colspan="6" attrs="{'invisible':[('display_type', '!=', False)]}">
                    <div class="row_header">
                        <label for="product_uom_qty" class="row_label"/>
                    </div>
                    <div class="row_header">
                        <label for="product_uom" class="row_label"/>
                    </div>
                    <div class="row_header">
                        <label for="purchase_price" class="row_label"/>
                    </div>
                    <div class="row_header">
                        <label for="price_unit" class="row_label"/>
                    </div>
                    <div class="row_header">
                        <label for="discount" groups="sale.group_discount_per_so_line" class="row_label"/>
                    </div>
                    <div class="row_header">
                        <label for="markup_percent" class="row_label"/>
                    </div>
                    <newline/>

                    <field
                        context="{'partner_id':parent.partner_id, 'quantity':product_uom_qty, 'pricelist':parent.pricelist_id, 'uom':product_uom, 'uom_qty_change':True, 'company_id': parent.company_id}"
                        name="product_uom_qty" nolabel="1"/>
                    <field
                        name="product_uom"
                        force_save="1"
                        groups="uom.group_uom"
                        attrs="{
                            'readonly': [('state', 'in', ('sale', 'done', 'cancel'))],
                            'required': [('display_type', '=', False)],
                        }"
                        nolabel="1"
                    />
                    <field name="purchase_price" groups="base.group_user" nolabel="1"/>
                    <field name="price_unit"  nolabel="1"/>
                    <div name="discount" groups="sale.group_discount_per_so_line">
                        <field name="discount" nolabel="1"/>
                    </div>
                    <field name="markup_percent"  nolabel="1"/>

                    <label string="" colspan="4"/>
                    <!-- <separator colspan="2" class="row_header"/> -->
                    <div class="row_header"></div>
                    <div class="row_header"></div>
                    <newline/>
                    <label string="" colspan="4"/>
                    <field name="margin" groups="base.group_user"/>
                    <label string="" colspan="4"/>
                    <field name="price_subtotal"/>

                </group>
                
            </xpath>
            <!-- 
            <xpath expr="//field[@name='order_line']/tree//field[@name='price_unit']" position="after">
                <field name="is_elaboration" invisible="1" force_save="1"/>
                <field name="elaboration_id"  attrs="{'readonly': [('state', 'in', ('done', 'cancel'))]}"/>
                <field name="elaboration_note"  attrs="{'readonly': [('state', 'in', ('done', 'cancel'))]}"/>
            </xpath> -->
        </field>
    </record>

</odoo>
